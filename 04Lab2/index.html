<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RV Productions — Interactive Puzzle</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      min-height: 100vh;
    }

    h1, h2, h3 {
      font-weight: 900;
      text-transform: uppercase;
      text-align: center;
      letter-spacing: 1px;
    }
    h1 { font-size: 2rem; margin-bottom: 10px; }
    h2 { font-size: 1.2rem; margin: 15px 0 10px; }
    h3 { font-size: 1rem; margin-bottom: 8px; }

 
    .puzzle-container {
      display: flex;
      gap: 20px;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap; 
      margin-bottom: 20px;
      width: 100%;
    }

    .puzzle-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 500px;
      flex: 1;
    }

    .puzzle, .reference-puzzle {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, auto);
      gap: 2px;
      border: 4px solid #fff;
      background: #000;
      width: 100%;
      max-width: 500px;
      min-width: 350px;
    }

    .piece, .ref-piece {
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .piece { cursor: grab; }
    .piece:hover { transform: scale(1.03); box-shadow: 0 0 12px rgba(255,255,255,0.15); z-index: 2; }
    .piece.dragging { opacity: 0.55; cursor: grabbing; transform: scale(0.98); box-shadow: none; }
    .piece.over { outline: 3px solid #fff; transform: scale(1.04); box-shadow: 0 0 18px rgba(255,255,255,0.45); }

    .puzzle img, .reference-puzzle img {
      width: 100%;
      height: auto;
      object-fit: cover;
      user-select: none;
      display: block;
      pointer-events: auto;
    }

    .reference-puzzle .ref-piece img { pointer-events: none; }


    @media (max-width: 920px) {
      .puzzle, .reference-puzzle { min-width: 260px; max-width: 420px; }
    }
    @media (max-width: 600px) {
      .puzzle, .reference-puzzle { min-width: 180px; max-width: 100%; }
      .puzzle-box { width: 100%; max-width: none; }
    }

    .video-wrap {
      margin-top: 20px;
      width: 100%;
      max-width: 1000px;
    }

    video {
      width: 100%;
      border: 4px solid #fff;
      display:block;
    }

    footer {
      margin-top: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      color: #aaa;
      text-align: center;
      letter-spacing: 0.5px;
    }
  </style>
</head>
<body>
  <h1>Women with Baskets by Anita Magsaysay</h1>
  <h2>Puzzle Activity</h2>

  <div class="puzzle-container">
    <div class="puzzle-box">
      <h3>Interactive Puzzle</h3>
      <div class="puzzle" id="puzzle">
        <div class="piece"><img src="5.jpg" alt="piece 5"></div>
        <div class="piece"><img src="1.jpg" alt="piece 1"></div>
        <div class="piece"><img src="6.jpg" alt="piece 6"></div>
        <div class="piece"><img src="3.jpg" alt="piece 3"></div>
        <div class="piece"><img src="2.jpg" alt="piece 2"></div>
        <div class="piece"><img src="4.jpg" alt="piece 4"></div>
      </div>
    </div>

    <div class="puzzle-box">
      <h3>Reference</h3>
      <div class="reference-puzzle">
        <div class="ref-piece"><img src="4.jpg" alt="piece 4"></div>
        <div class="ref-piece"><img src="3.jpg" alt="piece 3"></div>
        <div class="ref-piece"><img src="1.jpg" alt="piece 1"></div>
        <div class="ref-piece"><img src="6.jpg" alt="piece 6"></div>
        <div class="ref-piece"><img src="2.jpg" alt="piece 2"></div>
        <div class="ref-piece"><img src="5.jpg" alt="piece 5"></div>
      </div>
    </div>
  </div>

  <div class="video-wrap">
    <h2>Artwork Video</h2>
    <video controls>
      <source src="Anita.mp4" type="video/mp4">
    </video>
  </div>

  <footer>© 2025 RV Productions | Drag and drop to solve the puzzle</footer>

  <script>
    (function () {
      const puzzle = document.getElementById('puzzle');
      let dragged = null;

      puzzle.addEventListener('dragstart', e => {
        const piece = e.target.closest('.piece');
        if (!piece) return;
        piece.setAttribute('draggable', 'true');
        dragged = piece;
        piece.classList.add('dragging');
        try { e.dataTransfer.setData('text/plain', ''); } catch (err) {  }
      });

      puzzle.addEventListener('dragend', e => {
        const piece = e.target.closest('.piece');
        if (!piece) return;
        piece.classList.remove('dragging');
        dragged = null;
        puzzle.querySelectorAll('.piece.over').forEach(p => p.classList.remove('over'));
      });

      puzzle.addEventListener('dragover', e => {
        e.preventDefault(); 
        const over = e.target.closest('.piece');
        puzzle.querySelectorAll('.piece.over').forEach(p => {
          if (p !== over) p.classList.remove('over');
        });
        if (over && over !== dragged) over.classList.add('over');
      });

      puzzle.addEventListener('drop', e => {
        e.preventDefault();
        const target = e.target.closest('.piece');

        if (!dragged) return;

        if (!target) {
          puzzle.appendChild(dragged);
        } else if (target === dragged) {
        } else {
          const children = Array.from(puzzle.children);
          const draggedIndex = children.indexOf(dragged);
          const targetIndex = children.indexOf(target);

          if (draggedIndex < targetIndex) {
            puzzle.insertBefore(dragged, target.nextSibling);
          } else {
            puzzle.insertBefore(dragged, target);
          }
        }
        puzzle.querySelectorAll('.piece.over').forEach(p => p.classList.remove('over'));
      });

      function ensureDraggables() {
        puzzle.querySelectorAll('.piece').forEach(p => p.setAttribute('draggable', 'true'));
      }
      ensureDraggables();
    })();
  </script>
</body>
</html>
